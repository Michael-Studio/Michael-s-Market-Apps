<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BTC Trade Sim ¬∑ –∂–∏–≤–∞—è —Å–∏–º—É–ª—è—Ü–∏—è</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }
    body {
      min-height: 100vh;
      background: linear-gradient(145deg, #0b1422 0%, #1a2335 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }
    .simulator-card {
      max-width: 700px;
      width: 100%;
      background: rgba(18, 26, 40, 0.9);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 48px;
      padding: 30px 28px;
      box-shadow: 0 30px 50px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(247, 147, 26, 0.2) inset;
      border: 1px solid rgba(255, 215, 0, 0.15);
      transition: all 0.2s;
    }
    .header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
    }
    .btc-icon {
      background: #f7931a;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 24px;
      color: #0b1422;
      box-shadow: 0 8px 18px rgba(247, 147, 26, 0.4);
    }
    .title {
      color: white;
      font-weight: 600;
      font-size: 1.8rem;
      letter-spacing: -0.5px;
      text-shadow: 0 2px 5px rgba(0,0,0,0.5);
    }
    .title span {
      font-size: 1rem;
      background: #2d3b52;
      padding: 4px 12px;
      border-radius: 40px;
      margin-left: 12px;
      color: #b3c7e5;
      font-weight: 400;
    }
    .price-panel {
      background: #101a2b;
      border-radius: 32px;
      padding: 28px 24px;
      margin-bottom: 24px;
      border: 1px solid #2e3b50;
      box-shadow: inset 0 2px 5px #00000055, 0 10px 20px #00000030;
    }
    .current-label {
      color: #8ba0c0;
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 1px;
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
    }
    .price-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .price {
      font-size: 3.8rem;
      font-weight: 700;
      color: white;
      line-height: 1;
    }
    .price small {
      font-size: 1.6rem;
      font-weight: 400;
      color: #8ba0c0;
      margin-left: 6px;
    }
    .change {
      font-size: 1.6rem;
      font-weight: 600;
      padding: 8px 16px;
      border-radius: 60px;
      background: #1e2a3c;
    }
    .change.positive { color: #4effb5; background: #1c4b3c; }
    .change.negative { color: #ff7b7b; background: #582b36; }
    .balance-container {
      display: flex;
      gap: 20px;
      margin: 28px 0 24px;
      flex-wrap: wrap;
    }
    .balance-card {
      background: #0d1624;
      border-radius: 28px;
      padding: 18px 22px;
      flex: 1 1 160px;
      border: 1px solid #293445;
      box-shadow: 0 8px 0 #070d17;
    }
    .balance-label {
      color: #7f92af;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 10px;
    }
    .balance-number {
      color: white;
      font-size: 2.1rem;
      font-weight: 600;
      line-height: 1.2;
    }
    .balance-number small {
      font-size: 1rem;
      color: #7f92af;
      font-weight: 400;
      margin-left: 5px;
    }
    .usd-bal .balance-number { color: #d4e6ff; }
    .btc-bal .balance-number { color: #f7931a; }
    .actions {
      display: flex;
      gap: 18px;
      margin: 32px 0 24px;
    }
    .btn {
      flex: 1;
      padding: 22px 12px;
      border: none;
      border-radius: 40px;
      font-weight: 700;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.12s;
      cursor: pointer;
      box-shadow: 0 12px 0 #0b0f1a;
      border: 1px solid rgba(255,255,255,0.1);
      color: white;
    }
    .btn:active {
      transform: translateY(6px);
      box-shadow: 0 5px 0 #0b0f1a;
    }
    .btn-buy {
      background: #1d8f5e;
      background: linear-gradient(145deg, #1fa86d, #0e7b4b);
    }
    .btn-sell {
      background: #b5454f;
      background: linear-gradient(145deg, #cc5757, #9f3030);
    }
    .btn:disabled {
      opacity: 0.3;
      transform: translateY(0);
      box-shadow: 0 8px 0 #0b0f1a;
      pointer-events: none;
      filter: grayscale(0.6);
    }
    .input-group {
      background: #0f1828;
      padding: 12px 20px;
      border-radius: 50px;
      display: flex;
      align-items: center;
      border: 1px solid #314159;
      margin-top: 10px;
    }
    .input-group label {
      color: #a1b5d3;
      font-size: 1.1rem;
      margin-right: 15px;
    }
    .input-group input {
      background: transparent;
      border: none;
      color: white;
      font-size: 1.7rem;
      font-weight: 600;
      width: 120px;
      outline: none;
      text-align: right;
    }
    .input-group input::placeholder {
      color: #2f405b;
    }
    .input-group span {
      color: #8ca3c4;
      font-size: 1.2rem;
      margin-left: 6px;
      font-weight: 500;
    }
    .info-row {
      display: flex;
      justify-content: space-between;
      color: #8ca3c4;
      margin: 16px 0 20px;
      background: #060e1a60;
      padding: 12px 20px;
      border-radius: 60px;
      font-size: 0.95rem;
      border: 1px dashed #314159;
    }
    .total-valued {
      color: #f0f4ff;
      font-weight: 500;
    }
    .history-title {
      color: #b3c9ec;
      margin: 18px 0 8px;
      font-weight: 400;
      letter-spacing: 0.5px;
      font-size: 0.9rem;
    }
    .history-list {
      background: #0b1322;
      border-radius: 32px;
      padding: 12px 8px;
      max-height: 120px;
      overflow-y: auto;
      border: 1px solid #2a3448;
      scrollbar-width: thin;
      scrollbar-color: #f7931a #1d2a3a;
    }
    .history-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 16px;
      border-bottom: 1px solid #1f2b3d;
      color: #b3c7e5;
      font-size: 0.95rem;
    }
    .history-item:last-child { border-bottom: none; }
    .history-item .action-buy { color: #4effb5; }
    .history-item .action-sell { color: #ff9f9f; }
    .reset-area {
      display: flex;
      justify-content: flex-end;
      margin-top: 16px;
    }
    .reset-btn {
      background: transparent;
      border: 1px solid #455973;
      color: #b7cbea;
      padding: 8px 22px;
      border-radius: 40px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: 0.2s;
    }
    .reset-btn:hover {
      background: #1d314a;
      color: white;
    }
    .footnote {
      color: #3b4a64;
      text-align: center;
      margin-top: 16px;
      font-size: 0.8rem;
    }
  </style>
</head>
<body>
  <div class="simulator-card">
    <!-- header -->
    <div class="header">
      <div class="btc-icon">‚Çø</div>
      <div class="title">Bitcoin simulator <span>paper trade</span></div>
    </div>

    <!-- live price -->
    <div class="price-panel">
      <div class="current-label">
        <span>BTC/USD ¬∑ live sim</span>
        <span id="priceTimestamp">just now</span>
      </div>
      <div class="price-row">
        <div class="price" id="btcPriceDisplay">42,500 <small>USD</small></div>
        <div class="change" id="priceChangeBadge">+0.0%</div>
      </div>
    </div>

    <!-- balances -->
    <div class="balance-container">
      <div class="balance-card usd-bal">
        <div class="balance-label">üíµ USD balance</div>
        <div class="balance-number" id="usdBalance">10,000.<small>00</small></div>
      </div>
      <div class="balance-card btc-bal">
        <div class="balance-label">‚Çø Bitcoin</div>
        <div class="balance-number" id="btcBalance">0.000<small>BTC</small></div>
      </div>
    </div>

    <!-- trade form (amount) -->
    <div class="input-group">
      <label>Amount (BTC)</label>
      <input type="number" id="btcAmount" min="0.001" step="0.001" value="0.05" placeholder="0.05">
      <span>BTC</span>
    </div>

    <!-- buy/sell buttons -->
    <div class="actions">
      <button class="btn btn-buy" id="buyBtn" aria-label="buy bitcoin">‚¨ÜÔ∏è –ö—É–ø–∏—Ç—å</button>
      <button class="btn btn-sell" id="sellBtn" aria-label="sell bitcoin">‚¨áÔ∏è –ü—Ä–æ–¥–∞—Ç—å</button>
    </div>

    <!-- approximate total & portfolio value -->
    <div class="info-row">
      <span>üí∞ –ü–æ—Ä—Ç—Ñ–µ–ª—å (BTC‚ÜíUSD)</span>
      <span class="total-valued" id="totalPortfolioUSD">10,000.00 USD</span>
    </div>

    <!-- –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫ -->
    <div class="history-title">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏</div>
    <div class="history-list" id="historyContainer">
      <div class="history-item">üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</div>
      <div class="history-item">üí° –ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ –≤—ã—à–µ</div>
    </div>

    <!-- reset + footnote -->
    <div class="reset-area">
      <button class="reset-btn" id="resetBtn">‚ü≤ –°–±—Ä–æ—Å —Å–∏–º—É–ª—è—Ü–∏–∏</button>
    </div>
    <div class="footnote">—Ü–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É ¬∑ —Å–∏–º—É–ª—è—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</div>
  </div>

  <script>
    (function() {
      // --- –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ---
      let usd = 10000.0;               // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å $
      let btc = 0.0;                   // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π BTC
      let currentPrice = 42500.0;       // —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ BTC
      let prevPrice = currentPrice;      // –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è %

      // —ç–ª–µ–º–µ–Ω—Ç—ã DOM
      const usdSpan = document.getElementById('usdBalance');
      const btcSpan = document.getElementById('btcBalance');
      const priceDisplay = document.getElementById('btcPriceDisplay');
      const changeBadge = document.getElementById('priceChangeBadge');
      const priceTimestamp = document.getElementById('priceTimestamp');
      const amountInput = document.getElementById('btcAmount');
      const buyBtn = document.getElementById('buyBtn');
      const sellBtn = document.getElementById('sellBtn');
      const totalPortfolioSpan = document.getElementById('totalPortfolioUSD');
      const historyContainer = document.getElementById('historyContainer');
      const resetBtn = document.getElementById('resetBtn');

      // –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      function formatUSD(value) {
        return value.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
      }
      function formatBTC(value) {
        return value.toFixed(3);
      }
      function formatPrice(price) {
        return price.toFixed(1).replace(/\d(?=(\d{3})+\.)/g, '$&,');
      }

      // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (–±–∞–ª–∞–Ω—Å—ã, —Ü–µ–Ω–∞, –ø–æ—Ä—Ç—Ñ–µ–ª—å, –∫–Ω–æ–ø–∫–∏)
      function refreshUI() {
        // –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã
        priceDisplay.innerHTML = `${formatPrice(currentPrice)} <small>USD</small>`;
        // –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
        let changePercent = ((currentPrice - prevPrice) / prevPrice * 100) || 0;
        let absChange = currentPrice - prevPrice;
        let sign = absChange >= 0 ? '+' : '';
        changeBadge.textContent = `${sign}${changePercent.toFixed(2)}%`;
        changeBadge.classList.remove('positive', 'negative');
        if (absChange >= 0) changeBadge.classList.add('positive');
        else changeBadge.classList.add('negative');

        // –±–∞–ª–∞–Ω—Å—ã
        usdSpan.innerHTML = formatUSD(usd) + '.<small>00</small>';
        btcSpan.innerHTML = formatBTC(btc) + '<small>BTC</small>';

        // –ø–æ—Ä—Ç—Ñ–µ–ª—å –≤ USD
        let portfolioUSD = usd + (btc * currentPrice);
        totalPortfolioSpan.innerText = formatUSD(portfolioUSD) + ' USD';

        // –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
        const d = new Date();
        priceTimestamp.innerText = d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });

        // —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –∏–ª–∏ –Ω—É–ª–µ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
        let amountBtc = parseFloat(amountInput.value);
        if (isNaN(amountBtc) || amountBtc <= 0) amountBtc = 0.001; // –ø–æ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∫–∞
        const buyPossible = (usd >= amountBtc * currentPrice) && amountBtc > 0;
        const sellPossible = (btc >= amountBtc) && amountBtc > 0;

        buyBtn.disabled = !buyPossible;
        sellBtn.disabled = !sellPossible;
      }

      // –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é (type: 'buy' –∏–ª–∏ 'sell')
      function addHistoryEntry(type, btcAmount, price, usdValue) {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'history-item';

        const actionSpan = document.createElement('span');
        const actionType = type === 'buy' ? '–ü–û–ö–£–ü–ö–ê' : '–ü–†–û–î–ê–ñ–ê';
        const actionClass = type === 'buy' ? 'action-buy' : 'action-sell';
        actionSpan.innerHTML = `<span class="${actionClass}">${actionType}</span> ${btcAmount.toFixed(3)} BTC`;

        const detailSpan = document.createElement('span');
        detailSpan.innerHTML = `@ ${formatPrice(price)} $ (${formatUSD(usdValue)}$)`;

        itemDiv.appendChild(actionSpan);
        itemDiv.appendChild(detailSpan);

        historyContainer.prepend(itemDiv); // —Å–≤–µ–∂–µ–µ —Å–≤–µ—Ä—Ö—É
        if (historyContainer.children.length > 6) {
          historyContainer.removeChild(historyContainer.lastElementChild);
        }
      }

      // –ª–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–∫–∏
      function buyBitcoin() {
        let amountBtc = parseFloat(amountInput.value);
        if (isNaN(amountBtc) || amountBtc <= 0) {
          amountBtc = 0.001;
          amountInput.value = '0.001';
        }
        const costUSD = amountBtc * currentPrice;
        if (usd >= costUSD) {
          usd -= costUSD;
          btc += amountBtc;
          addHistoryEntry('buy', amountBtc, currentPrice, costUSD);
          refreshUI();
        } else {
          alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ USD. –ù—É–∂–Ω–æ: $${formatUSD(costUSD)}`);
        }
      }

      // –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–∞–∂–∏
      function sellBitcoin() {
        let amountBtc = parseFloat(amountInput.value);
        if (isNaN(amountBtc) || amountBtc <= 0) {
          amountBtc = 0.001;
          amountInput.value = '0.001';
        }
        if (btc >= amountBtc) {
          const revenueUSD = amountBtc * currentPrice;
          btc -= amountBtc;
          usd += revenueUSD;
          addHistoryEntry('sell', amountBtc, currentPrice, revenueUSD);
          refreshUI();
        } else {
          alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BTC. –£ –≤–∞—Å ${formatBTC(btc)} BTC`);
        }
      }

      // –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Ü–µ–Ω—ã (—Å–∏–º—É–ª—è—Ü–∏—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏)
      function randomWalkPrice() {
        // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –¥–µ–ª—å—Ç—ã
        prevPrice = currentPrice;
        // –º–Ω–æ–∂–∏—Ç–µ–ª—å –æ—Ç 0.97 –¥–æ 1.03 (–ø—Ä–∏–º–µ—Ä–Ω–æ 3% –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
        const changeFactor = 0.98 + Math.random() * 0.05; // 0.98 .. 1.03
        let newPrice = currentPrice * changeFactor;
        // –Ω–µ –¥–∞—ë–º —É–π—Ç–∏ –≤ —Å–æ–≤—Å–µ–º —É–∂ –¥–∏–∫–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —Å–≤–æ–±–æ–¥—É
        if (newPrice < 20000) newPrice = 20000 + Math.random() * 5000;
        if (newPrice > 80000) newPrice = 70000 + Math.random() * 8000;
        currentPrice = Math.round(newPrice * 10) / 10; // –æ–¥–∏–Ω –∑–Ω–∞–∫ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
        refreshUI();
      }

      // –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –∫ –¥–µ—Ñ–æ–ª—Ç—É
      function resetSimulator() {
        usd = 10000.0;
        btc = 0.0;
        currentPrice = 42500.0;
        prevPrice = currentPrice;
        amountInput.value = '0.05';
        // –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        historyContainer.innerHTML = '';
        const welcome1 = document.createElement('div');
        welcome1.className = 'history-item';
        welcome1.innerHTML = 'üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å';
        const welcome2 = document.createElement('div');
        welcome2.className = 'history-item';
        welcome2.innerHTML = 'üí∞ –ë–∞–ª–∞–Ω—Å —Å–±—Ä–æ—à–µ–Ω';
        historyContainer.appendChild(welcome1);
        historyContainer.appendChild(welcome2);
        refreshUI();
      }

      // --- –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π ---
      buyBtn.addEventListener('click', buyBitcoin);
      sellBtn.addEventListener('click', sellBitcoin);
      resetBtn.addEventListener('click', resetSimulator);

      // –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞: –Ω–µ –¥–∞—ë–º –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –∏ —Å–ª–∏—à–∫–æ–º –º–µ–ª–∫–∏–º
      amountInput.addEventListener('change', function() {
        let val = parseFloat(this.value);
        if (isNaN(val) || val < 0.001) this.value = 0.001;
        if (val > 1000) this.value = 1000; // –æ–≥—Ä–∞–Ω–∏—á–∏–º –æ–≥—Ä–æ–º–Ω—ã–µ —Å–¥–µ–ª–∫–∏
        refreshUI(); // –ø–µ—Ä–µ—Å—á–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–Ω–æ–ø–æ–∫
      });
      amountInput.addEventListener('input', function() {
        refreshUI(); // –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
      });

      // –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã –∫–∞–∂–¥—ã–µ 1.3 —Å–µ–∫—É–Ω–¥—ã (—á—É—Ç—å –¥–∏–Ω–∞–º–∏—á–Ω–µ–µ)
      setInterval(randomWalkPrice, 1300);

      // —Å—Ä–∞–∑—É –ø–µ—Ä–≤–∏—á–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
      refreshUI();

      // –¥–æ–±–∞–≤–∏–º –∏—Å—Ç–æ—Ä–∏—é –Ω–∞—á–∞–ª—å–Ω—É—é
      addHistoryEntry('buy', 0, currentPrice, 0); // –ø—Ä–æ—Å—Ç–æ –∫—Ä–∞—Å–∏–≤—ã–π —Å—Ç–∞—Ä—Ç
    })();
  </script>
</body>
</html>
